function WbDispatcher(){var t={};function e(e){return t[e]||(t[e]=new Flux.Dispatcher),t[e]}this.on=function(t,i){return e(t).register(i)},this.off=function(t,i){return e(t).unregister(i)},this.waitFor=function(t,i){return e(t).waitFor(i)},this.dispatch=function(t,i){return e(t).dispatch(i)},this.isDispatching=function(t){return e(t).isDispatching()}}!function(t,e){"use strict";"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():t.ResizeObserver=e()}(this,function(){"use strict";var t=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some(function(t,r){return t[0]===e&&(i=r,!0)}),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),r=this.__entries__[i];return r&&r[1]},e.prototype.set=function(e,i){var r=t(this.__entries__,e);~r?this.__entries__[r][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,r=t(i,e);~r&&i.splice(r,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,r=this.__entries__;i<r.length;i++){var o=r[i];t.call(e,o[1],o[0])}},e}()}(),e="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,i="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),r="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(i):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},o=2;var n=20,s=["top","right","bottom","left","width","height","size","weight"],a="undefined"!=typeof MutationObserver,l=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,s=0;function a(){i&&(i=!1,t()),n&&c()}function l(){r(a)}function c(){var t=Date.now();if(i){if(t-s<o)return;n=!0}else i=!0,n=!1,setTimeout(l,e);s=t}return c}(this.refresh.bind(this),n)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){e&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),a?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){e&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;s.some(function(t){return!!~i.indexOf(t)})&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),c=function(t,e){for(var i=0,r=Object.keys(e);i<r.length;i++){var o=r[i];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},d=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||i},p=y(0,0,0,0);function u(t){return parseFloat(t)||0}function h(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce(function(e,i){return e+u(t["border-"+i+"-width"])},0)}function g(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return p;var r=d(t).getComputedStyle(t),o=function(t){for(var e={},i=0,r=["top","right","bottom","left"];i<r.length;i++){var o=r[i],n=t["padding-"+o];e[o]=u(n)}return e}(r),n=o.left+o.right,s=o.top+o.bottom,a=u(r.width),l=u(r.height);if("border-box"===r.boxSizing&&(Math.round(a+n)!==e&&(a-=h(r,"left","right")+n),Math.round(l+s)!==i&&(l-=h(r,"top","bottom")+s)),!function(t){return t===d(t).document.documentElement}(t)){var c=Math.round(a+n)-e,g=Math.round(l+s)-i;1!==Math.abs(c)&&(a-=c),1!==Math.abs(g)&&(l-=g)}return y(o.left,o.top,a,l)}var f="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof d(t).SVGGraphicsElement}:function(t){return t instanceof d(t).SVGElement&&"function"==typeof t.getBBox};function b(t){return e?f(t)?function(t){var e=t.getBBox();return y(0,0,e.width,e.height)}(t):g(t):p}function y(t,e,i,r){return{x:t,y:e,width:i,height:r}}var m=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=b(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),w=function(){return function(t,e){var i,r,o,n,s,a,l,d=(r=(i=e).x,o=i.y,n=i.width,s=i.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,l=Object.create(a.prototype),c(l,{x:r,y:o,width:n,height:s,top:o,right:r+n,bottom:s+o,left:r}),l);c(this,{target:t,contentRect:d})}}(),W=function(){function e(e,i,r){if(this.activeObservations_=[],this.observations_=new t,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=i,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new m(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof d(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new w(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),v="undefined"!=typeof WeakMap?new WeakMap:new t,A=function(){return function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=l.getInstance(),r=new W(e,i,this);v.set(this,r)}}();return["observe","unobserve","disconnect"].forEach(function(t){A.prototype[t]=function(){var e;return(e=v.get(this))[t].apply(e,arguments)}}),void 0!==i.ResizeObserver?i.ResizeObserver:A}),angular.module("am-wb-core",[]),angular.module("am-wb-core").factory("WidgetEditor",function(){function t(t,e){this.callbacks=[],this.widget=t,this.options=e}return t.prototype.destroy=function(){this.callbacks=[],delete this.widget,delete this.options},t.prototype.getWidget=function(){return this.widget},t.prototype.setDirty=function(t){this.dirty=void 0===t||t},t.prototype.isDirty=function(){return this.dirty},t.prototype.off=function(t,e){if(angular.isArray(this.callbacks[t])){var i=this.callbacks[t],r=i.indexOf(e);r>-1&&i.splice(r,1)}},t.prototype.on=function(t,e){angular.isArray(this.callbacks[t])||(this.callbacks[t]=[]),_.includes(this.callbacks[t],e)||this.callbacks[t].push(e)},t.prototype.fire=function(t,e){for(var i=_.merge({source:this,type:t},e||{}),r=this.callbacks[t]||[],o=0;o<r.length;o++)try{r[o](i)}catch(t){}},t.prototype.setActive=function(){},t.prototype.isActive=function(){},t.prototype.save=function(){},t.prototype.hide=function(){},t.prototype.show=function(){},t.prototype.isHidden=function(){},t}),angular.module("am-wb-core").factory("WbObservableObject",function(){function t(){this.silent=!1,this.callbacks={}}return t.prototype.setSilent=function(t){this.silent=t},t.prototype.isSilent=function(){return this.silent},t.prototype.on=function(t,e){if(!angular.isFunction(e))throw{message:"Callback must be a function"};var i=this.callbacks;angular.isArray(i[t])||(i[t]=[]),i[t].includes(e)||i[t].push(e)},t.prototype.off=function(t,e){var i=this.callbacks;if(angular.isArray(i[t])){var r=i[t].indexOf(e);r>-1&&i[t].splice(r,1)}},t.prototype.fire=function(t,e){var i=_.merge({source:this,type:t},e||{}),r=this.callbacks;if(!this.isSilent()&&angular.isDefined(r[t]))for(var o=r[t],n=0;n<o.length;n++)try{o[n].apply(o[n],[i])}catch(t){log.error({source:"ObservableObject",message:"The listener throw an unexpected exception.",exception:t})}},t}),angular.module("am-wb-core").factory("$wbMedia",["$rootScope","$window",function(t,e){var i={xs:"(max-width: 599px)","gt-xs":"(min-width: 600px)",sm:"(min-width: 600px) and (max-width: 959px)","gt-sm":"(min-width: 960px)",md:"(min-width: 960px) and (max-width: 1279px)","gt-md":"(min-width: 1280px)",lg:"(min-width: 1280px) and (max-width: 1919px)","gt-lg":"(min-width: 1920px)",xl:"(min-width: 1920px)",landscape:"(orientation: landscape)",portrait:"(orientation: portrait)",print:"print"},r=["xl","gt-lg","lg","gt-md","md","gt-sm","sm","gt-xs","xs","landscape","portrait","print"],o={},n={},s={},a={};return l.getResponsiveAttribute=function(t,e){for(var i=0;i<r.length;i++){var s=r[i];if(n[o[s]].matches){var a=d(t,e+"-"+s);if(t[a])return t[a]}}return t[d(t,e)]},l.getQuery=function(t){return n[t]},l.watchResponsiveAttributes=function(t,e,r){var o=[];return t.forEach(function(t){var n=d(e,t);for(var s in angular.isDefined(e[n])&&o.push(e.$observe(n,angular.bind(void 0,r,null))),i)n=d(e,t+"-"+s),angular.isDefined(e[n])&&o.push(e.$observe(n,angular.bind(void 0,r,s)))}),function(){o.forEach(function(t){t()})}},l;function l(t){var r=o[t];angular.isUndefined(r)&&(r=o[t]=function(t){return i[t]||("("!==t.charAt(0)?"("+t+")":t)}(t));var a=s[r];return angular.isUndefined(a)&&(a=function(t){var i=n[t];i||(i=n[t]=e.matchMedia(t));return i.addListener(c),s[i.media]=!!i.matches}(r)),a}function c(e){t.$evalAsync(function(){s[e.media]=!!e.matches})}function d(t,e){return a[e]||(a[e]=t.$normalize(e))}}]),angular.module("am-wb-core").factory("WbProcessorAbstract",["WbObservableObject",function(t){function e(){t.apply(this,arguments)}return e.prototype=new t,e}]),angular.module("am-wb-core").factory("WbProcessorAttribute",["WbProcessorAbstract",function(t){function e(t,e){var i=t.getElement(),r={},o=t.getModelProperty("style")||{},n=t.getRuntimeModel()||{};e?_.forEach(e,function(t){r[t]=n.style[t]||o[t]||""}):(i.attr("style",""),r=angular.merge({},o,n.style)),i.css(r)}function i(t,e,i){if((!t.isEditable()||"draggable"!==e&&"dropzone"!==e)&&"style"!==e){var r=t.getElement();i?r.attr(e,i):r.removeAttr(e),"html"===e&&r.html(i),"text"===e&&r.text(i),"inputType"===e&&t.setElementAttribute("type",i),"value"===e&&r.val(i)}}function r(t,e){for(var r=0;r<e.length;r++){var o=e[r];i(t,o,t.getProperty(o)||t.getModelProperty(o))}}function o(){t.apply(this)}return o.prototype=new t,o.prototype.process=function(t,i){if("modelChanged"===i.type)r(t,t.getElementAttributes()),e(t);else if("modelUpdated"===i.type){for(var o=i.keys||[i.key],n=[],s=[],a=0;a<o.length;a++)o[a].startsWith("style.")?n.push(o[a].substring(6)):s.push(o[a]);r(t,_.intersection(s,t.getElementAttributes())),e(t,n)}},o}]),angular.module("am-wb-core").factory("WbProcessorEvent",["WbProcessorAbstract","$widget","$injector",function(t,e,i){function r(t,r,o){var n;if(!t.eventFunctions.hasOwnProperty(r))try{var s=t.getEvent()[r];if(!s)return;s+="\n//@ sourceURL=wb-"+t.getId()+"-"+r+".js";var a=_.join(_.concat(["$widget","$event"],e.getProvidersKey()));t.eventFunctions[r]=new Function(a,s)}catch(t){}if(n=t.eventFunctions[r])try{var l=_.merge({$event:o,$widget:t},e.getProviders());return i.invoke(n,t,l)}catch(t){}}function o(){t.apply(this)}return o.prototype=new t,o.prototype.process=function(t,i){if("stateChanged"===i.type)if("ready"===t.state){!function(t){t.__eventListeners={click:function(e){return r(t,"click",e)},dblclick:function(e){return r(t,"dblclick",e)},mouseout:function(e){return r(t,"mouseout",e)},mouseover:function(e){return r(t,"mouseover",e)},mousedown:function(e){return r(t,"mousedown",e)},mouseup:function(e){return r(t,"mouseup",e)},mouseenter:function(e){return r(t,"mouseenter",e)},mouseleave:function(e){return r(t,"mouseleave",e)},resize:function(e){return r(t,"resize",e)},intersection:function(e){return r(t,"intersection",e)},success:function(e){return r(t,"success",e)},error:function(e){return r(t,"error",e)},abort:function(e){return r(t,"abort",e)},load:function(e){return r(t,"load",e)},beforeunload:function(e){return r(t,"beforeunload",e)},unload:function(e){return r(t,"unload",e)},change:function(e){return r(t,"change",e)},keyup:function(e){return r(t,"keyup",e)},keydown:function(e){return r(t,"keydown",e)},keypress:function(e){return r(t,"keypress",e)}},angular.forEach(t.__eventListeners,function(e,i){t.on(i,e)})}(t),r(t,"stateChanged",i);var o=_.clone(i);o.type="init",r(t,o.type,o)}else!function(t){angular.isDefined(t.__eventListeners)&&(angular.forEach(t.__eventListeners,function(e,i){t.off(i,e)}),delete t.__eventListeners),_.forEach(e.getProviders(),function(t){_.isFunction(t.clean)&&t.clean()})}(t)},o}]),angular.module("am-wb-core").factory("WbProcessorMicrodata",["WbProcessorAbstract",function(t){var e=["itemscope","itemtype","itemprop","itemref","itemid","content","value"];function i(t,e){var i=t.getElement();angular.forEach(e,function(e){var r=t.getProperty(e)||t.getModelProperty(e);r?i.attr(e,r):i.removeAttr(e)})}function r(){t.apply(this)}return r.prototype=new t,r.prototype.process=function(t,r){"modelChanged"!==r.type&&"stateChanged"!==r.type?"modelUpdated"!==r.type||i(t,_.intersection(e,r.keys||[r.key])):i(t,e)},r}]),angular.module("am-wb-core").run(["$window","$q","$rootScope",function(t,e,i){var r={},o={};t.loadLibrary=function(t){if(r[t])return e.resolve({message:"isload"});var o=e.defer(),n=document.createElement("script");return n.src=t,n.async=1,n.onload=function(){r[t]=!0,o.resolve({path:t,message:"loaded"}),i.$$phase||i.$digest()},n.onerror=function(){r[t]=!1,o.reject({path:t,message:"fail"}),i.$$phase||i.$digest()},document.getElementsByTagName("head")[0].appendChild(n),o.promise},t.removeLibrary=function(t){return e.resolve({source:t})},t.isLibraryLoaded=function(t){return!!r[t]},t.loadStyle=function(t){if(o[t])return e.resolve(o[t]);var r=e.defer(),n=document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",t),n.onload=function(){o[t]={element:n,path:t},r.resolve(o[t]),i.$$phase||i.$digest()},n.onerror=function(){o[t]=void 0,r.reject({path:t,message:"fail"}),i.$$phase||i.$digest()},document.getElementsByTagName("head")[0].appendChild(n),o[t]=r.promise,o[t]},t.removeStyle=function(t){if(!this.isStyleLoaded(t))return e.resolve({});var i=o[t];i.element.parentNode.removeChild(i.element),o[t]=void 0,e.resolve(i)},t.isStyleLoaded=function(t){return!!o[t]},t.setMeta=function(t,e){var i,r=t.replace(new RegExp(":","g"),"\\:"),o=this.getHeadElement(),n=o.find("meta[name="+r+"]");_.isUndefined(e)?n.length&&n.remove():(0===n.length?(i=angular.element("<meta name='"+t+"' content='' />"),o.append(i)):i=angular.element(n[0]),i.attr("content",e))},t.getMeta=function(t){var e=t.replace(new RegExp(":","g"),"\\:"),i=this.getHeadElement().find("meta[name="+e+"]");if(0!==i.length)return i.attr("content")},t.setLink=function(t,e){var i,r=t.replace(new RegExp(":","g"),"\\:"),o=this.getHeadElement(),n=o.find("link[key="+r+"]");for(var s in 0===n.length?(i=angular.element("<link key='"+t+"' />"),o.append(i)):i=angular.element(n[0]),e)i.attr(s,e[s])}}]),angular.module("am-wb-core").run(["$widget","WbProcessorMicrodata","WbProcessorEvent","WbProcessorAttribute",function(t,e,i,r){t.setProcessor("microdata",new e),t.setProcessor("event",new i),t.setProcessor("attribut",new r)}]).run(["$anchorScroll","$animate","$cacheFactory","$document","$exceptionHandler","$filter","$http","$httpParamSerializer","$httpParamSerializerJQLike","$interpolate","$interval","$locale","$location","$log","$parse","$q","$rootElement","$sce","$templateCache","$templateRequest","$timeout","$window","$widget","$wbMedia","$wbStorage","$wbDispatcher",function(t,e,i,r,o,n,s,a,l,c,d,p,u,h,g,f,b,y,m,w,W,v,A,_,E,x){A.setProvider("$anchorScroll",t).setProvider("$animate",e).setProvider("$cacheFactory",i).setProvider("$document",r).setProvider("$exceptionHandler",o).setProvider("$filter",n).setProvider("$http",s).setProvider("$httpParamSerializer",a).setProvider("$httpParamSerializerJQLike",l).setProvider("$interpolate",c).setProvider("$interval",d).setProvider("$locale",p).setProvider("$location",u).setProvider("$log",h).setProvider("$parse",g).setProvider("$q",f).setProvider("$rootElement",b).setProvider("$sce",y).setProvider("$templateCache",m).setProvider("$templateRequest",w).setProvider("$timeout",W).setProvider("$window",v).setProvider("$dispatcher",x).setProvider("$storage",E).setProvider("$media",_)}]).run(["$widget",function(t){t.newWidget({type:"a",title:"A link",description:"A widget to add external link. It is used as block item.",icon:"wb-widget-a",groups:["basic"],model:{html:"Link title"},controller:"WbWidgetA",isLeaf:!0}),t.newWidget({type:"address",title:"address",description:"description.",icon:"wb-widget-address",groups:["basic"],controller:"WbWidgetAddress",isLeaf:!1}),t.newWidget({type:"applet",title:"applet",description:"applet.",icon:"wb-widget-applet",groups:["basic"],controller:"WbWidgetApplet",isLeaf:!0}),t.newWidget({type:"area",title:"area",description:"area",icon:"wb-widget-area",groups:["basic"],controller:"WbWidgetArea"}),t.newWidget({type:"article",title:"article",description:"article",icon:"wb-widget-article",groups:["basic"],controller:"WbWidgetArticle"}),t.newWidget({type:"aside",title:"aside",description:"aside",icon:"wb-widget-aside",groups:["basic"],controller:"WbWidgetAside"}),t.newWidget({type:"audio",title:"Audio",label:"audio",icon:"wb-widget-audio",description:"This widget is used to add audio in the document.",groups:["basic"],model:{media:"(min-width: 650px)",src:"http://www.gitlab.com/am-wb/am-wb-commonhttps://unsplash.com/photos/8emNXIvrCL8/download?force=true"},controller:"WbWidgetAudio",isLeaf:!1}),t.newWidget({type:"blockquote",title:"blockquote",label:"blockquote",icon:"wb-widget-blockquote",description:"description",groups:["basic"],controller:"WbWidgetBlockquote",isLeaf:!0}),t.newWidget({type:"button",title:"button",label:"button",icon:"wb-widget-button",description:"description",groups:["basic"],controller:"WbWidgetButton",isLeaf:!0}),t.newWidget({type:"canvas",title:"canvas",label:"canvas",icon:"wb-widget-canvas",description:"description",groups:["basic"],controller:"WbWidgetCanvas",isLeaf:!0}),t.newWidget({type:"datalist",title:"datalist",label:"datalist",icon:"wb-widget-datalist",description:"description",groups:["basic"],controller:"WbWidgetDatalist"}),t.newWidget({type:"dd",title:"dd",label:"dd",icon:"wb-widget-dd",description:"description",groups:["basic"],controller:"WbWidgetDd"}),t.newWidget({type:"details",title:"details",label:"details",icon:"wb-widget-details",description:"description",groups:["basic"],controller:"WbWidgetDetails"}),t.newWidget({type:"dialog",title:"dialog",label:"dialog",icon:"wb-widget-dialog",description:"description",groups:["basic"],controller:"WbWidgetDialog"}),t.newWidget({type:"div",title:"div",label:"div",icon:"wb-widget-div",description:"description",groups:["basic"],controller:"WbWidgetDiv",isLeaf:!1}),t.newWidget({type:"dl",title:"dl",label:"dl",icon:"wb-widget-dl",description:"description",groups:["basic"],controller:"WbWidgetDl"}),t.newWidget({type:"dt",title:"dt",label:"dt",icon:"wb-widget-dt",description:"description",groups:["basic"],controller:"WbWidgetDt"}),t.newWidget({type:"embed",title:"embed",label:"embed",icon:"wb-widget-embed",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-embed",controller:"WbWidgetEmbed"}),t.newWidget({type:"fieldset",title:"fieldset",label:"fieldset",icon:"wb-widget-fieldset",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-fieldset",controller:"WbWidgetFieldset"}),t.newWidget({type:"figcaption",title:"figcaption",label:"figcaption",icon:"wb-widget-figcaption",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-figcaption",controller:"WbWidgetFigcaption"}),t.newWidget({type:"figure",title:"figure",label:"figure",icon:"wb-widget-figure",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-figure",controller:"WbWidgetFigure"}),t.newWidget({type:"footer",title:"footer",label:"footer",icon:"wb-widget-footer",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-footer",controller:"WbWidgetFooter"}),t.newWidget({type:"form",title:"form",label:"form",icon:"wb-widget-form",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-form",controller:"WbWidgetForm",isLeaf:!1}),t.newWidget({type:"frame",title:"frame",label:"frame",icon:"wb-widget-form",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-frame",controller:"WbWidgetFrame"}),t.newWidget({type:"frameset",title:"frameset",label:"frameset",icon:"wb-widget-frameset",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-frameset",controller:"WbWidgetFrameset",isLeaf:!1});for(var e=1;e<7;e++){var i="h"+e;t.newWidget({type:i,title:"Header Level "+e,description:"A header widget",icon:"wb-widget-h"+e,groups:["basic"],model:{name:"Header-"+e,style:{padding:"8px"}},controller:"WbWidgetH",isLeaf:!0})}t.newWidget({type:"header",title:"header",label:"header",icon:"wb-widget-header",description:"description",groups:["basic"],controller:"WbWidgetHeader",isLeaf:!1}),t.newWidget({type:"hr",title:"hr",label:"hr",icon:"wb-widget-hr",description:"description",groups:["basic"],controller:"WbWidgetHr",isLeaf:!0}),t.newWidget({type:"i",title:"Italics",description:"The widget defines a part of text in an alternate voice or mood.",icon:"wb-widget-i",groups:["basic"],model:{name:"i",html:"Text"},help:"http://dpq.co.ir",helpId:"wb-widget-i",controllerAs:"ctrl",controller:"WbWidgetI",isLeaf:!0}),t.newWidget({type:"iframe",title:"Inline Frame",description:"Add inline frame to show another document within current one.",icon:"wb-widget-iframe",groups:["basic"],model:{name:"iframe",sandbox:"allow-same-origin allow-scripts",src:"https://www.google.com",style:{padding:"8px"}},help:"http://dpq.co.ir",helpId:"wb-widget-iframe",controllerAs:"ctrl",controller:"WbWidgetIframe",isLeaf:!0}),t.newWidget({type:"img",title:"Image",label:"image",icon:"wb-widget-img",description:"A widget to insert an link to page.",groups:["basic"],model:{html:"img",src:"resources/wb-brand-3.0.png",style:{width:"80%",maxWidth:"500px"}},controllerAs:"ctrl",controller:"WbWidgetImg",isLeaf:!0}),t.newWidget({type:"input",title:"Input field",description:"A widget to get data from users.",icon:"wb-widget-input",groups:["basic"],model:{name:"input",sandbox:"allow-same-origin allow-scripts",src:"https://www.google.com",style:{padding:"8px"}},help:"http://dpq.co.ir",helpId:"wb-widget-input",controller:"WbWidgetInput",controllerAs:"ctrl",isLeaf:!0}),t.newWidget({type:"kbd",title:"kbd",label:"kbd",icon:"wb-widget-kbd",description:"description",groups:["basic"],controller:"WbWidgetKbd"}),t.newWidget({type:"label",title:"label",label:"label",icon:"wb-widget-label",description:"description",groups:["basic"],controller:"WbWidgetLabel",isLeaf:!0}),t.newWidget({type:"legend",title:"legend",label:"legend",icon:"wb-widget-legend",description:"description",groups:["basic"],controller:"WbWidgetLegend",isLeaf:!0}),t.newWidget({type:"li",title:"li",label:"li",icon:"wb-widget-li",description:"description",groups:["basic"],controller:"WbWidgetLi",isLeaf:!1}),t.newWidget({type:"link",title:"Link",label:"link",icon:"wb-widget-link",description:"A widget to insert an link to page.",groups:["basic"],model:{html:"Link",url:"http://www.gitlab.com/am-wb/am-wb-common"},controllerAs:"ctrl",controller:"WbWidgetLink",isLeaf:!0}),t.newWidget({type:"main",title:"main",label:"main",icon:"wb-widget-main",description:"A widget to insert an link to page.",groups:["basic"],controller:"WbWidgetMain",isLeaf:!1}),t.newWidget({type:"map",title:"map",label:"map",icon:"wb-widget-map",description:"description",groups:["basic"],controller:"WbWidgetMap",isLeaf:!1}),t.newWidget({type:"meta",title:"Meta",description:"A widget to add meta data.",icon:"wb-widget-meta",groups:["basic"],model:{name:"name",content:"content",style:{margin:"8px",background:{color:"#313131"},border:{style:"dotted",color:"#afafaf"},color:"#ffffff",padding:"8px"}},controllerAs:"ctrl",controller:"WbWidgetMeta"}),t.newWidget({type:"meter",title:"meter",label:"meter",icon:"wb-widget-meter",description:"description",groups:["basic"],controller:"WbWidgetMeter"}),t.newWidget({type:"nav",title:"nav",label:"nav",icon:"wb-widget-nav",description:"description",groups:["basic"],controller:"WbWidgetNav",isLeaf:!1}),t.newWidget({type:"noscript",title:"noscript",label:"noscript",icon:"wb-widget-noscript",description:"description",groups:["basic"],controller:"WbWidgetNoscript"}),t.newWidget({type:"object",title:"object",label:"object",icon:"wb-widget-object",description:"description",groups:["basic"],controller:"WbWidgetObject",isLeaf:!1}),t.newWidget({type:"ol",title:"ol",label:"ol",icon:"wb-widget-ol",description:"description",groups:["basic"],controller:"WbWidgetOl",isLeaf:!1}),t.newWidget({type:"optgroup",title:"optgroup",label:"optgroup",icon:"wb-widget-optgroup",description:"description",groups:["basic"],controller:"WbWidgetOptgroup",isLeaf:!1}),t.newWidget({type:"option",title:"option",label:"option",icon:"wb-widget-option",description:"description",groups:["basic"],controller:"WbWidgetOption"}),t.newWidget({type:"output",title:"output",label:"output",icon:"wb-widget-output",description:"description",groups:["basic"],controller:"WbWidgetOutput"}),t.newWidget({type:"p",title:"Paragraph",description:"A widget to add paragraph.",icon:"wb-widget-p",groups:["basic"],model:{name:"Pragraph",style:{padding:"8px"}},controllerAs:"ctrl",controller:"WbWidgetP",isLeaf:!0}),t.newWidget({type:"param",title:"param",label:"param",icon:"wb-widget-param",description:"description",groups:["basic"],controller:"WbWidgetParam",isLeaf:!0}),t.newWidget({type:"picture",title:"Picture",label:"picture",icon:"wb-widget-picture",description:"This widget is used to add picture in the document.",groups:["basic"],model:{media:"(min-width: 650px)",src:"http://www.gitlab.com/am-wb/am-wb-commonhttps://unsplash.com/photos/8emNXIvrCL8/download?force=true"},controller:"WbWidgetPicture",isLeaf:!1}),t.newWidget({type:"pre",title:"Preformatted",label:"preformatted",icon:"wb-widget-pre",description:"A widget to insert an Preformatted text to page.",groups:["basic"],model:{html:"class A {\n\tint a;\n}"},controller:"WbWidgetPre",controllerAs:"ctrl",isLeaf:!0}),t.newWidget({type:"progress",title:"Progress",description:"A widget to add progress.",icon:"wb-widget-progress",groups:["basic"],model:{name:"progress",style:{padding:"8px",margin:"8px",size:{height:"30px"}}},controller:"WbWidgetProgress"}),t.newWidget({type:"q",title:"q",label:"q",icon:"wb-widget-q",description:"description",groups:["basic"],controller:"WbWidgetQ"}),t.newWidget({type:"s",title:"S",icon:"wb-widget-s",description:"The widget is used to define text that is no longer correct.",groups:["basic"],model:{html:"Text"},controller:"WbWidgetS"}),t.newWidget({type:"samp",title:"Samp",icon:"wb-widget-samp",description:"It defines sample output from a computer program.",groups:["basic"],model:{html:"Text"},controller:"WbWidgetSamp"}),t.newWidget({type:"script",title:"script",label:"script",icon:"wb-widget-script",description:"description",groups:["basic"],controller:"WbWidgetScript"}),t.newWidget({type:"section",title:"section",label:"section",icon:"wb-widget-section",description:"description",groups:["basic"],controller:"WbWidgetSection",isLeaf:!1}),t.newWidget({type:"select",title:"select",label:"select",icon:"wb-widget-select",description:"description",groups:["basic"],controller:"WbWidgetSelect"}),t.newWidget({type:"small",title:"Small",icon:"wb-widget-small",description:"The widget defines smaller text.",groups:["basic"],model:{html:"Small text"},controller:"WbWidgetSmall"}),t.newWidget({type:"source",title:"Source",label:"source",icon:"wb-widget-source",description:"This widget is used to add source in the document.",groups:["basic"],model:{media:"(min-width: 650px)",src:"http://www.gitlab.com/am-wb/am-wb-commonhttps://unsplash.com/photos/8emNXIvrCL8/download?force=true"},controller:"WbWidgetSource"}),t.newWidget({type:"span",title:"Span",icon:"wb-widget-span",description:"The widget is used to group inline-elements in a document.",groups:["basic"],model:{html:"Text"},controller:"WbWidgetSpan"}),t.newWidget({type:"strong",title:"Strong",icon:"wb-widget-strong",description:"The widget defines strong emphasized text.",groups:["basic"],model:{html:"Text"},controller:"WbWidgetStrong"}),t.newWidget({type:"style",title:"style",label:"style",icon:"wb-widget-style",description:"description",groups:["basic"],controller:"WbWidgetStyle"}),t.newWidget({type:"summary",title:"summary",label:"summary",icon:"wb-widget-summary",description:"description",groups:["basic"],controller:"WbWidgetSummary",isLeaf:!1}),t.newWidget({type:"svg",title:"svg",label:"svg",icon:"wb-widget-svg",description:"description",groups:["basic"],controller:"WbWidgetSvg"}),t.newWidget({type:"template",title:"template",label:"template",icon:"wb-widget-template",description:"description",groups:["basic"],controller:"WbWidgetTemplate",isLeaf:!1}),t.newWidget({type:"textarea",title:"Text Area field",description:"A widget to get data from users.",icon:"wb-widget-textarea",groups:["basic"],model:{name:"textarea",style:{padding:"8px"}},help:"http://dpq.co.ir",helpId:"wb-widget-textarea",controller:"WbWidgetTextarea"}),t.newWidget({type:"track",title:"track",label:"track",icon:"wb-widget-track",description:"description",groups:["basic"],help:"http://dpq.co.ir/more-information-track",controller:"WbWidgetTrack"}),t.newWidget({type:"ul",title:"ul",label:"ul",icon:"wb-widget-ul",description:"description",groups:["basic"],controller:"WbWidgetUl",isLeaf:!1}),t.newWidget({type:"video",title:"Video",label:"video",icon:"wb-widget-video",description:"This widget is used to add video in the document.",groups:["basic"],model:{media:"(min-width: 650px)",src:"http://www.gitlab.com/am-wb/am-wb-commonhttps://unsplash.com/photos/8emNXIvrCL8/download?force=true"},controller:"WbWidgetVideo",isLeaf:!1}),t.newWidget({type:"ObjectCollection",title:"Object collection",description:"A widget to show a collection of items",groups:["seen"],icon:"pages",model:"",help:"",helpId:"wb-seen-widget-collection",template:"<div></div>",controller:"AmWbSeenCollectionWidget"}),t.newWidget({type:"import",title:"Import",description:"Import a part of other content",groups:["commons"],icon:"import_export",setting:["import"],help:"",helpId:"",template:"<div></div>",controller:"WbWidgetSeenImport"})}]),angular.module("am-wb-core").service("$dispatcher",WbDispatcher).service("$wbDispatcher",WbDispatcher),angular.module("am-wb-core").service("$objectPath",function(){var t=Object.prototype.hasOwnProperty,e={};function i(t){var e=parseInt(t);return e.toString()===t?e:t}function r(t,i){if(e.includeInheritedProps||"number"==typeof i&&_.isArray(t)||t.hasOwnProperty(i))return t[i]}function o(t,e,n,s){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return o(t,e.split(".").map(i),n,s);var a=e[0],l=r(t,a);return 1===e.length?(void 0!==l&&s||(t[a]=n),l):(void 0===l&&("number"==typeof e[1]?t[a]=[]:t[a]={}),o(t[a],e.slice(1),n,s))}this.has=function(r,o){if(null==r)return!1;if("number"==typeof o?o=[o]:"string"==typeof o&&(o=o.split(".")),!o||0===o.length)return!1;for(var n=0;n<o.length;n++){var s=i(o[n]);if(!("number"==typeof s&&_.isArray(r)&&s<r.length||(e.includeInheritedProps?s in Object(r):t.call(r,s))))return!1;r=r[s]}return!0},this.ensureExists=function(t,e,i){return o(t,e,i,!0)},this.set=function(t,e,i,r){return o(t,e,i,r)},this.insert=function(t,e,i,r){var o=this.get(t,e);r=~~r,_.isArray(o)||(o=[],this.set(t,e,o)),o.splice(r,0,i)},this.empty=function(e,i){var r,o;if(!_.isEmpty(i)&&(null!=e&&(r=this.get(e,i)))){if("string"==typeof r)return this.set(e,i,"");if(_.isBoolean(r))return this.set(e,i,!1);if("number"==typeof r)return this.set(e,i,0);if(_.isArray(r))r.length=0;else{if(!_.isObject(r))return this.set(e,i,null);for(o in r)t.call(r,o)&&delete r[o]}}},this.push=function(t,e){var i=this.get(t,e);_.isArray(i)||(i=[],this.set(t,e,i)),i.push.apply(i,Array.prototype.slice.call(arguments,2))},this.coalesce=function(t,e,i){for(var r,o=0,n=e.length;o<n;o++)if(void 0!==(r=this.get(t,e[o])))return r;return i},this.get=function(t,e,o){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return o;if("string"==typeof e)return this.get(t,e.split("."),o);var n=i(e[0]),s=r(t,n);return void 0===s?o:1===e.length?s:this.get(t[n],e.slice(1),o)},this.del=function(t,e){if("number"==typeof e&&(e=[e]),null==t)return t;if(_.isEmpty(e))return t;if("string"==typeof e)return this.del(t,e.split("."));var o=i(e[0]),n=r(t,o);if(null==n)return n;if(1===e.length)_.isArray(t)?t.splice(o,1):delete t[o];else if(void 0!==t[o])return this.del(t[o],e.slice(1));return t}}),angular.module("am-wb-core").service("$wbStorage",function(){}),angular.module("am-wb-core").service("$wbUtil",["$q","$templateRequest","$sce",function(t,e,i){function r(t){var r=t.template,o=t.templateUrl;return angular.isDefined(r)?angular.isFunction(r)&&(r=r(t.params||t)):angular.isDefined(o)&&(angular.isFunction(o)&&(o=o(t.params)),angular.isDefined(o)&&(t.loadedTemplateUrl=i.valueOf(o),r=e(o))),r}function o(t){angular.isObject(t.style)||(t.style={}),function(t){if(t.style.layout)t.style.layout.align_self&&(t.style.alignSelf=t.style.layout.align_self),t.style.layout.direction&&(t.style.display="flex",t.style.flexGrow=t.style.layout.grow,t.style.flexShrink=t.style.layout.shrink,t.style.flexBasis=t.style.layout.basis,t.style.flexDirection=t.style.layout.direction,t.style.flexWrap=t.style.layout.wrap?"wrap":"no-wrap",t.style.justifyContent=t.style.layout.justify,"end"!==t.style.justifyContent&&"end"!==t.style.justifyContent||(t.style.justifyContent="flex-"+t.style.justifyContent),t.style.alignItems=t.style.layout.align,t.style.order=t.style.layout.order),delete t.style.layout}(t),function(t){t.style.size&&(t.style.width=t.style.size.width,t.style.minWidth=t.style.size.minWidth,t.style.maxWidth=t.style.size.maxWidth,t.style.height=t.style.size.height,t.style.minHeight=t.style.size.minHeight,t.style.maxHeight=t.style.size.maxHeight,delete t.style.size)}(t),function(t){if(t.style.background)t.style.background.image&&(t.style.backgroundImage='url("'+t.style.background.image+'")'),t.style.backgroundColor=t.style.background.color,t.style.backgroundSize=t.style.background.size,t.style.backgroundRepeat=t.style.background.repeat,t.style.backgroundOrigin=t.style.background.origin,t.style.backgroundPosition=t.style.background.position,delete t.style.background}(t),function(t){if(t.style.border)t.style.borderStyle=t.style.border.style,t.style.borderColor=t.style.border.color,t.style.borderWidth=t.style.border.width,t.style.borderRadius=t.style.border.radius,delete t.style.border}(t),function(t){if(t.style.padding&&angular.isObject(t.style.padding)){var e="";e=t.style.padding.isUniform?t.style.padding.uniform:t.style.padding.top||"0px "+t.style.padding.right||"0px "+t.style.padding.bottom||"0px "+t.style.padding.left||"0px ",t.style.padding=e}if(t.style.margin&&angular.isObject(t.style.margin)){var i="";i=t.style.margin.isUniform?t.style.margin.uniform:t.style.margin.top||"0px "+t.style.margin.right||"0px "+t.style.margin.bottom||"0px "+t.style.margin.left||"0px ",t.style.margin=i}}(t),function(t){t.style.overflow&&(t.style.overflowX=t.style.overflow.x,t.style.overflowY=t.style.overflow.y)}(t),function(t){if(t.style.shadows){var e=[];_.forEach(t.style.shadows,function(t){var i=t.hShift+" "+t.vShift+" "+t.blur+" "+t.spread+" "+t.color;t.inset&&(i+=" inset"),e.push(i)}),t.style.boxShadow=_.join(e),delete t.style.shadows}}(t)}function n(t){return delete t.version,function(t){t.on?delete t.event:(t.event||(t.event={}),t.event.failure&&(t.event.error=t.event.failure,delete t.event.failure),t.event&&(t.on=t.event,delete t.event),t.on&&_.forOwn(t.on,function(e,i){t.on[i]="/* code style is deprecated. see http://www.viraweb123.ir/amh-blog/content/wb-v4-release */ \n"+e}))}(t),o(t),_.isArray(t.contents)&&(t.children=t.contents,delete t.contents),_.isArray(t.children)&&t.children.length&&_.forEach(t.children,n),function(t){"Group"===t.type&&(t.type="div"),"Import"===t.type&&(t.type="import"),"Link"===t.type&&(t.type="a",t.html=t.title,t.href=t.url,t.style.text={align:"center"},t.style.cursor="pointer",delete t.title,delete t.url),"Image"===t.type&&(t.type="img",t.src=t.url,delete t.url),"HtmlText"===t.type&&(t.html=t.text,delete t.text)}(t),t}this.clean=function(t,e){if(t.type&&"Page"!==t.type&&"Group"!==t.type||(t.type="div"),"wb4"===t.version&&!e)return t;var i=n(t);return i.version="wb4",i},this.getTemplateFor=function(e){return t.when(r(e))},this.getTemplateOf=r,this.findWidgetModelById=function(t,e){if(t.id===e)return t;if(_.isArray(t.children))for(var i=0;i<t.children.length;i++){var r=this.findWidgetModelById(t.children[i],e);if(r)return r}return null},this.replaceWidgetModelById=function(t,e,i){if(!t)return i;if(_.isArray(t.children))for(var r=0;r<t.children.length;r++){if(t.children[r].id===e)return void(t.children[r]=i);this.replaceWidgetModelById(t.children[r],e,i)}},this.downloadWidgetModel=function(t,i){var r=this;return e(t).then(function(t){var e=r.clean(angular.fromJson(t));return i?r.findWidgetModelById(e,i):e})}}]),angular.module("am-wb-core").service("$widget",["$q","$injector","WidgetEditor",function(t,e,i){var r=[],o=[],n=[],s=this,a={},l=[],c={template:'<div ng-show="wbEditable">Unsuported widget?!</div>',label:"Not found",description:"Element not found"},d={type:"Page",label:"Page",description:"Panel contains list of widgets.",image:"images/wb/content.svg"};function p(t){for(var e=0;e<r.length;e++)if(r[e].id===t)return r[e];var i={id:t};return r.push(i),i}function u(t){return t.type in o?o[t.type]:"Page"===t.type?d:c}function h(t){return t in o}this.hasWidget=h,this.isWidgetLeaf=function(t){return t in o&&o[t].isLeaf},s.newWidget=function(t){return h(t.type),t.model=t.model||{style:{}},t.model.type=t.type,t.model.name=t.model.name||t.title,o[t.type]=t,n.push(t.type),s},s.widget=function(e){return t.when(u(e))},s.widgets=function(){var e={items:[]};return n.forEach(function(t){e.items.push(o[t])}),t.when(e)},s.widgetData=function(t){return angular.copy(t.model)},s.getWidgetsKey=function(){return n},s.getWidget=u,s.getWidgets=function(){var t={items:[]};return n.forEach(function(e){t.items.push(o[e])}),t},s.group=p,s.groups=function(){return r},s.newGroup=function(t){var e=p(t.id);angular.extend(e,t)},s.compile=function(i,r,o){var n,s=u(i);n=o||angular.element("<"+i.type+"></"+i.type+">");var a=new(e.get(s.controller||"WbWidgetAbstract"))(n,r);return n[0].$$wbController=a,t.resolve(a.setModel(i))},this.getChildren=function(t){var e=[];if(t.isLeaf())return e;var i=[];for(_.forEach(t.getChildren(),function(t){i.push(t)});i.length;)if(t=i.pop(),e.push(t),!t.isLeaf())for(var r=t.getChildren(),o=0;o<r.length;o++){var n=r[o];i.push(n)}return e},this.debounce=function(t,e,i){var r;return function(){var o=this,n=arguments,s=i&&!r;clearTimeout(r),r=setTimeout(function(){r=null,i||t.apply(o,n)},e),s&&t.apply(o,n)}};var g={};this.removeProvider=function(t){var e=g[t];return g[t]=void 0,e},this.getProvider=function(t){return g[t]},this.setProvider=function(t,e){return g[t]=e,this},this.getProviders=function(){return g},this.addProvider=function(t,e){return this.setProvider(t,e)},this.getProvidersKey=function(){return _.keys(g)};var f={},b=new i;this.setEditor=function(t,e){f[t]=e},this.getEditor=function(t){if(t.$$wbEditor)return t.$$wbEditor;if(void 0===f[t.getType()])return b;var i=f[t.getType()],r=new(e.get(i.type))(t,i.options||{}),o=this;return t.$$wbEditor=r,r.on("destroy",function(){o.removeEditorFromList(r)}),r},this.setProcessor=function(t,e){a[t]=e},this.removeProcessor=function(t){a[t]=void 0},this.getProcessor=function(t){return a[t]},this.getProcessors=function(){return a},this.applyProcessors=function(t,e){e=e||{},angular.forEach(a,function(i){try{i.process(t,e)}catch(t){log.error({message:"Fail to run the processor",exception:t})}})},this.addConverter=function(t){l.push(t)},this.getConverters=function(){return l},this.getConverter=function(t){for(var e=0;e<l.length;e++)if(l[e].getMimetype()===t)return l[e]},this.widgetFromPoint=function(t,e){return this.widgetFromElement(document.elementFromPoint(t,e))},this.widgetFromElement=function(t){if(t)do{if(t.$$wbController)return t.$$wbController;t=t.parentNode}while(t)}}]),angular.module("am-wb-core").factory("WbWidgetAbstract",["$widget","$window","$objectPath",function(t,e,i){function r(t,e){this.elementAttributes=["id","name","title","class","accesskey","contenteditable","hidden","tabindex","dir","lang","translate","spellcheck","draggable","dropzone"],this.$element=t,this.$parent=e,this.state="init",this.actions=[],this.callbacks=[],this.childWidgets=[],this.eventFunctions={},this.computedStyle={},this.runtimeModel={style:{},on:{}},this.model={};var i,r,o,n=this;this.eventListeners={scroll:function(t){n.fire("scroll",t)},click:function(t){n.fire("click",t)},dblclick:function(t){n.fire("dblclick",t)},mouseout:function(t){n.fire("mouseout",t)},mouseover:function(t){n.fire("mouseover",t)},mousedown:function(t){n.fire("mousedown",t)},mouseup:function(t){n.fire("mouseup",t)},mouseenter:function(t){n.fire("mouseenter",t)},mouseleave:function(t){n.fire("mouseleave",t)},error:function(t){n.fire("error",t)},success:function(t){n.fire("success",t)},load:function(t){n.fire("load",t)},dragstart:function(t){n.fire("dragstart",t)},dragend:function(t){n.fire("dragend",t)},dragenter:function(t){n.fire("dragenter",t)},dragover:function(t){n.fire("dragover",t)},dragleave:function(t){n.fire("dragleave",t)},drop:function(t){n.fire("drop",t)},change:function(t){n.fire("change",t)},keyup:function(t){n.fire("keyup",t)},keydown:function(t){n.fire("keydown",t)},keypress:function(t){n.fire("keypress",t)}},this.resizeObserver=new ResizeObserver((i=function(t){angular.isArray(t)&&(t=t[0]),n.fire("resize",t)},r=300,function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){o=null,i.apply(t,e)},r)}));this.intersectionObserver=new IntersectionObserver(function(t){_.isArray(t)&&(t=t[0]),n.setIntersecting(t.isIntersecting,t)},{root:null,rootMargin:"0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),this.connect()}return r.prototype.getModel=function(){return this.model},r.prototype.setModel=function(t){if(t!==this.model)return this.setState("init"),this.model=t,this.runtimeModel={style:{},on:{}},this.fire("modelChanged"),this.setState("ready"),this},r.prototype.hasModelProperty=function(t){return i.has(this.getModel(),t)},r.prototype.getModelProperty=function(t){return i.get(this.getModel(),t)},r.prototype.setModelProperty=function(t,e){var r={source:this,key:t,keys:[t],oldValue:this.getModelProperty(t),value:e};angular.equals(r.oldValue,r.value)||(e?i.set(this.getModel(),t,e):i.del(this.getModel(),t),this.fire("modelUpdated",r))},r.prototype.getRuntimeModel=function(){return this.runtimeModel},r.prototype.hasProperty=function(t){return i.has(this.getRuntimeModel(),t)},r.prototype.getProperty=function(t){return i.get(this.getRuntimeModel(),t)},r.prototype.removeProperty=function(t){var e=this.getRuntimeModel();i.del(e,t)},r.prototype.setProperty=function(t,e){switch(t){case"style.layout.direction":t="style.flexDirection";break;case"style.background.color":t="style.backgroundColor";break;case"style.size.width":t="style.width";break;case"style.size.height":t="style.height"}var r={source:this,key:t,keys:[t],oldValue:this.getProperty(t),value:e};if(!angular.equals(r.oldValue,r.value)){var o=this.getRuntimeModel();angular.isDefined(e)?i.set(o,t,e):i.del(o,t),this.fire("modelUpdated",r)}},r.prototype.style=function(t,e){return angular.isDefined(t)?angular.isString(t)?angular.isDefined(e)?this.setStyle(t,e):this.getStyle(t):void 0:angular.copy(this.getProperty("style"))},r.prototype.setStyle=function(t,e){this.setProperty("style."+t,e)},r.prototype.getStyle=function(t){return this.getProperty("style."+t)},r.prototype.delete=function(){this.fire("delete"),this.getParent().removeChild(this)},r.prototype.destroy=function(t){(this.fire("destroy",t),this.callbacks=[],this.actions=[],this.model=null,angular.forEach(this.childWidgets,function(t){t.destroy()}),this.childWidgets=[],this.isRoot())||this.getElement().remove()},r.prototype.disconnect=function(){var t=this.getElement();t&&(this.resizeObserver.unobserve(t[0]),this.intersectionObserver.unobserve(t[0]),angular.forEach(this.eventListeners,function(e,i){t.off(i,e)}))},r.prototype.connect=function(){var t=this.getElement();t&&(angular.forEach(this.eventListeners,function(e,i){t.on(i,e)}),this.resizeObserver.observe(t[0]),this.intersectionObserver.observe(t[0]))},r.prototype.getElement=function(){return this.$element},r.prototype.setElementAttribute=function(t,e){var i=this.$element;e?i.attr(t,e):i.removeAttr(t)},r.prototype.getElementAttribute=function(t){return this.$element.attr(t)},r.prototype.removeElementAttribute=function(t){this.$element.removeAttr(t)},r.prototype.setSilent=function(t){this.silent=t},r.prototype.isSilent=function(){return this.silent},r.prototype.on=function(t,e){if(!angular.isFunction(e))throw{message:"Callback must be a function"};angular.isArray(this.callbacks[t])||(this.callbacks[t]=[]),this.callbacks[t].includes(e)||this.callbacks[t].push(e)},r.prototype.off=function(t,e){if(angular.isArray(this.callbacks[t])){var i=this.callbacks[t],r=i.indexOf(e);r>-1&&i.splice(r,1)}},r.prototype.fire=function(e,i){var r=(i=i||{})||{};if(r.source=this,r.type=e,t.applyProcessors(this,r),!this.isSilent()&&angular.isDefined(this.callbacks[e])){for(var o=this.callbacks[e],n=null,s=0;s<o.length;s++)try{n=o[s](r)||n}catch(t){}return n}},r.prototype.getDirection=function(){return this.getModelProperty("style.flexDirection")||"column"},r.prototype.getEvent=function(){return this.getModelProperty("on")||{}},r.prototype.getTitle=function(){return this.getModelProperty("label")},r.prototype.getType=function(){return this.getModelProperty("type")},r.prototype.getId=function(){return this.getModelProperty("id")},r.prototype.getName=function(){return this.getModelProperty("name")},r.prototype.getParent=function(){return this.$parent},r.prototype.setState=function(t){if(t!==this.state){var e=this.state;this.state=t,this.fire("stateChanged",{oldValue:e,value:t})}},r.prototype.isEditable=function(){return this.editable},r.prototype.setEditable=function(t){this.editable!==t&&(this.editable=t,t?this.setState("edit"):this.setState("ready"),angular.forEach(this.childWidgets,function(e){e.setEditable(t)}))},r.prototype.isIntersecting=function(){return this.intersecting},r.prototype.setIntersecting=function(t,e){_.isUndefined(this.intersecting)&&(t=!0),this.intersecting=t,this.fire("intersection",e)},r.prototype.clone=function(){var t=this.getParent(),e=t.indexOfChild(this);t.addChild(e,angular.copy(this.getModel()))},r.prototype.moveNext=function(){var t=this.getParent();t.moveChild(this,t.indexOfChild(this)+1)},r.prototype.moveBefore=function(){var t=this.getParent();t.moveChild(this,t.indexOfChild(this)-1)},r.prototype.moveFirst=function(){this.getParent().moveChild(this,0)},r.prototype.moveLast=function(){var t=this.getParent();t.moveChild(this,t.getChildren().length-1)},r.prototype.isRoot=function(){var t=this.getParent();return angular.isUndefined(t)||null===t},r.prototype.getRoot=function(){if(this.rootWidget)return this.rootWidget;for(this.rootWidget=this;!this.rootWidget.isRoot();)this.rootWidget=this.rootWidget.getParent();return this.rootWidget},r.prototype.isSelected=function(){return this.selected},r.prototype.setSelected=function(t){this.selected!==t&&(this.selected=t,t?this.fire("select"):this.fire("unselect"))},r.prototype.addAction=function(t){this.actions.push(t)},r.prototype.getActions=function(){return this.actions},r.prototype.getBoundingClientRect=function(){var t=this.getElement();if(!t)return{width:0,height:0,top:0,left:0};var e=t.offset();return{width:t.outerWidth(),height:t.outerHeight(),top:e.top+t.scrollTop(),left:e.left+t.scrollLeft()}},r.prototype.animate=function(t){var e={targets:this.getRuntimeModel()};t.duration&&(e.duration=t.duration),t.loop&&(e.loop=t.loop),t.autoplay&&(e.autoplay=t.autoplay),t.delay&&(e.delay=t.delay),t.easing&&(e.easing=t.easing);var i=this,r=[];for(var o in t){if(!_.includes(["duration","loop","autoplay","delay","easing"],o))r.push(o),e[o]=t[o],this.getProperty(o)||this.setProperty(o,this.getModelProperty(o))}return e.update=function(){i.fire("modelUpdated",{keys:r,value:null,oldValue:null})},anime(e)},r.prototype.removeAnimation=function(){},r.prototype.setWindow=function(t){this.window=t},r.prototype.getWindow=function(){return this.window||this.getRoot().getWindow()||e},r.prototype.addElementAttributes=function(){this.elementAttributes=_.union(this.elementAttributes,arguments)},r.prototype.getElementAttributes=function(){return this.elementAttributes},r.prototype.isLeaf=function(){return!0},r}]),angular.module("am-wb-core").factory("WbWidgetGroup",["$wbUtil","$widget","$q","WbWidgetAbstract",function(t,e,i,r){function o(t,e){r.apply(this,[t,e])}return o.$inject=["$element","$parent"],o.prototype=Object.create(r.prototype),o.prototype.setModel=function(t){if(t!==this.model){this.setState("init"),this.model=t,this.fire("modelChanged");var e=this;return this.loadWidgets().then(function(){return e})}},o.prototype.delete=function(){this.removeChildren(),this.fire("delete"),this.isRoot()||this.getParent().removeChild(this)},o.prototype.getChildById=function(t){for(var e=this.childWidgets,i=0;i<e.length;i++)if(e[i].getId()===t)return e[i]},o.prototype.getChildren=function(){return this.childWidgets},o.prototype.removeChild=function(t){var e=this.indexOfChild(t);if(e>-1){this.childWidgets.splice(e,1);var i=this.getModel();return e=i.children.indexOf(t.getModel()),i.children.splice(e,1),t.destroy(),!0}return!1},o.prototype.removeChildren=function(){var t=_.clone(this.getChildren());_.forEach(t,function(t){t.delete()})},o.prototype.loadWidgets=function(){angular.forEach(this.childWidgets,function(t){t.destroy()}),this.childWidgets=[];var t=this,r=function(){t.fire("loaded"),t.setState("ready")};if(!this.model||!angular.isArray(this.model.children))return i.resolve().finally(r);var o=this,n=[];return this.model.children.forEach(function(t,i){var r=e.compile(t,o).then(function(t){o.childWidgets[i]=t});n.push(r)}),i.all(n).then(function(){var e=o.getElement();e.empty(),o.childWidgets.forEach(function(i){i.setEditable(t.isEditable()),e.append(i.getElement())})}).finally(r)},o.prototype.addChildModel=function(i,r){var o=this.getModel(),n=this;return i=this.__cleanInsertIndex(i),r=t.clean(r),e.compile(r,this).then(function(t){return i<n.childWidgets.length?t.getElement().insertBefore(n.childWidgets[i].getElement()):n.getElement().append(t.getElement()),angular.isArray(o.children)||(o.children=[]),o.children.splice(i,0,r),n.childWidgets.splice(i,0,t),t.setEditable(n.isEditable()),n.fire("newchild",{widgets:[t]}),t})},o.prototype.addChildrenModel=function(t,e){var i=this.getModel(),r=this;return t=this.__cleanInsertIndex(t),this.__compileChildren(e).then(function(e){for(var o=0;o<e.length;o++){var n=e[o],s=o+t;s<r.childWidgets.length?n.getElement().insertBefore(r.childWidgets[s].getElement()):r.getElement().append(n.getElement()),angular.isArray(i.children)||(i.children=[]),i.children.splice(s,0,n.getModel()),r.childWidgets.splice(s,0,n),n.setEditable(r.isEditable())}r.fire("newchild",{widgets:e})})},o.prototype.addChild=o.prototype.addChildModel,o.prototype.addChildren=o.prototype.addChildrenModel,o.prototype.__compileChildren=function(r){var o=[],n=[],s=this;return angular.forEach(r,function(i,r){i=t.clean(i),o.push(e.compile(i,s).then(function(t){n[r]=t}))}),i.all(o).then(function(){return n})},o.prototype.__cleanInsertIndex=function(t){return!angular.isDefined(t)||t>this.childWidgets.length?this.childWidgets.length:t<0?0:t},o.prototype.moveChild=function(t,e){function i(t,e,i){var r=t[e];t.splice(e,1),t.splice(i,0,r)}if(!(e<0||e>this.getChildren().length-1||1===this.getChildren().length)&&this.getModel().children.indexOf(t.getModel())!==e){var r=this.getChildren()[e];this.getModel().children.indexOf(t.getModel())<e?r.getElement().after(t.getElement()):r.getElement().before(t.getElement()),i(this.getModel().children,this.getModel().children.indexOf(t.getModel()),e),i(this.getChildren(),this.indexOfChild(t),e)}},o.prototype.indexOfChild=function(t){return this.childWidgets&&this.childWidgets.length?this.childWidgets.indexOf(t):-1},o.prototype.getAllowedTypes=function(){return this.allowedTypes},o.prototype.setAllowedTypes=function(){this.allowedTypes=arguments},o.prototype.isLeaf=function(){return!1},o.prototype.isHorizontal=function(){return"row"===(this.getModelProperty("style.flexDirection")||this.getProperty("style.flexDirection"))},o}]),angular.module("am-wb-core").factory("WbWidgetAbstractHtml",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("html");var r=this;function o(t){if("html"===t.key){var e=r.getProperty(t.key)||r.getModelProperty(t.key);r.getElement().html(e)}}this.on("modelUpdated",o),this.on("runtimeModelUpdated",o)}return e.prototype=Object.create(t.prototype),e.prototype.html=function(){var t=arguments[0];t&&this.setElementAttribute("html",t);var e=this.getElement();return e.html.apply(e,arguments)},e}]),angular.module("am-wb-core").factory("WbWidgetA",["WbWidgetAbstractHtml",function(t){function e(e,i){function r(t){t.preventDefault()}t.apply(this,[e,i]),this.addElementAttributes("download","href","hreflang","media","ping","referrerpolicy","rel","target","aType");var o=this;function n(t){"aType"===t.key&&o.setElementAttribute("type",t.value)}this.on("stateChanged",function(t){"edit"===t.value?o.getElement().on("click dblclick",r):o.getElement().off("click dblclick",r)}),this.on("modelUpdated",n),this.on("runtimeModelUpdated",n)}return e.$inject=["$element","$parent"],e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetAddress",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetApplet",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetArea",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetArticle",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetAside",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetAudio",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("autoplay","controls","loop","muted","preload","src"),this.setAllowedTypes("source")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetBlockquote",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetButton",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetCanvas",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("AmWbSeenCollectionWidget",["WbWidgetGroup","$wbUtil","$q","$http","$log",function(t,e,i,r,o){function n(){this.param={},this.filterMap={},this.sortMap={}}n.prototype._init_filters=function(){var t=this.filterMap,e=Object.keys(t);this.param["_px_fk[]"]=[],this.param["_px_fv[]"]=[];for(var i=0;i<e.length;i++)for(var r=e[i],o=t[r],n=0;n<o.length;n++){var s=o[n];this.param["_px_fk[]"].push(r),this.param["_px_fv[]"].push(s)}},n.prototype._init_sorts=function(){var t=this.sortMap;this.param["_px_sk[]"]=Object.keys(t),this.param["_px_so[]"]=[];for(var e=0;e<this.param["_px_sk[]"].length;e++){var i=this.param["_px_sk[]"][e];this.param["_px_so[]"][e]=t[i]}},n.prototype.setSize=function(t){return this.param._px_ps=t,this},n.prototype.setQuery=function(t){return this.param._px_q=t,this},n.prototype.setPage=function(t){return this.param._px_p=t,this},n.prototype.nextPage=function(){return this.param._px_p||(this.param._px_p=1),this.param._px_p+=1,this},n.prototype.setOrder=function(t,e){return e?this.addSorter(t,e):this.removeSorter(t,e),this._init_sorts(),this},n.prototype.addSorter=function(t,e){return e?(this.sortMap[t]=e,this._init_sorts(),this):this},n.prototype.removeSorter=function(t){return delete this.sortMap[t],this._init_sorts(),this},n.prototype.clearSorters=function(){this.sortMap={}},n.prototype.setFilter=function(t,e){return angular.isDefined(e)?(this.filterMap[t]=[],this.addFilter(t,e)):this.removeFilter(t,e),this._init_filters(),this},n.prototype.addFilter=function(t,e){return angular.isDefined(e)?(angular.isArray(this.filterMap[t])||(this.filterMap[t]=[]),this.filterMap[t].push(e),this._init_filters(),this):this},n.prototype.removeFilter=function(t){return delete this.filterMap[t],this._init_filters(),this},n.prototype.clearFilters=function(){this.filterMap={}},n.prototype.getParameter=function(){return this.param},n.prototype.put=function(t,e){return this.param[t]=e,this},n.prototype.get=function(t){return this.param[t]};var s="ideal",a=["url","filters","sorts","query","properties","template"];function l(e,i,r){t.apply(this,[e,i,r]),this.setAllowedTypes(),this.addElementAttributes("url","filters","sorts","query","properties","template"),this._lastResponse,this._state=s;var o=this;function n(t){_.includes(a,t.key)&&o.reloadPage()}o.on("modelUpdated",n),o.on("runtimeModelUpdated",n),this.on("loaded",function(){o.reloadPage()})}return l.prototype=Object.create(t.prototype),l.prototype.reloadPage=function(){var t=this;if(this._reloading)return this._reloading.finally(function(){return t.reloadPage()});this.removeChildren(),this.getElement().empty(),delete this._lastResponse,this._reloading=this.loadNextPage(!0).finally(function(){delete t._reloading})},l.prototype.loadNextPage=function(){if(!this.hasMorePage())return i.reject({message:"No more page!?"});var t=this.getTemplate(),r=this;return this.getCollection().then(function(t){return r._lastResponse=t.data,r.fire("success",t)||t.data},function(t){return r.fire("error",t)||t}).then(function(r){return function(t,r){var n,s=[],a="";if(!angular.isArray(t))return i.resolve([]);for(var l=0;l<t.length;l++){a=r;try{n=Mustache.to_html(a,t[l]),n=JSON.parse(n),n=e.clean(n),s.push(n)}catch(t){o.error({message:"Falie to load template",error:t});continue}}return i.resolve(s)}(r.items||[],t)}).then(function(t){return r.addChildren(r.getChildren().length,t).then(function(){return r.fire("load",{children:t})||t})})},l.prototype.getTemplate=function(){return this.getProperty("template")||this.getModelProperty("template")||{type:"HtmlText",text:"<h3>Template is not set</h3>"}},l.prototype.getCollection=function(){if(this._state!==s)return this.lastQuery;var t=new n,e=this.getProperty("filters")||this.getModelProperty("filters")||[];angular.forEach(e,function(e){t.addFilter(e.key,e.value)});var o=this.getProperty("sorts")||this.getModelProperty("sorts")||[];angular.forEach(o,function(e){t.addSorter(e.key,e.order)}),t.setQuery(this.getProperty("query")||this.getModelProperty("query")),t.put("graphql",this.getProperty("properties")||this.getModelProperty("properties"));var a=this.getProperty("url")||this.getModelProperty("url");if(a){var l=this.getNextPageIndex();l>1&&t.setPage(l),this._state="busy";var c=this;this._lastQuery=r({method:"GET",url:a,params:t.getParameter()}).finally(function(){c._state=s,delete c.lastQuery})}else this._lastQuery=i.reject({message:"URL is not set",code:1});return this._lastQuery},l.prototype.getPagesCount=function(){return this._lastResponse?this._lastResponse.page_number:0},l.prototype.getCurrentPage=function(){return this._lastResponse?this._lastResponse.current_page:0},l.prototype.getItemPerPage=function(){return this._lastResponse?this._lastResponse.items_per_page:0},l.prototype.hasMorePage=function(){return!this._lastResponse||this._lastResponse.current_page<this._lastResponse.page_number},l.prototype.getNextPageIndex=function(){return this._lastResponse?this._lastResponse.current_page+1:1},l.prototype.getState=function(){return this._state||s},l.prototype.setAllowedTypes=function(){this.allowedTypes=[]},l.prototype.setEditable=function(e){t.prototype.setEditable.apply(this,arguments);for(var i=this.getChildren();!_.isEmpty(i);){var r=i.pop();r.setSilent(e),r.isLeaf()||(i=i.concat(r.getChildren()))}},l.prototype.isLeaf=function(){return!0},l}]),angular.module("am-wb-core").factory("WbWidgetDatalist",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetDd",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetDetails",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetDialog",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetDiv",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetDl",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetDt",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetEmbed",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetFieldset",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetFigcaption",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetFigure",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetFooter",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetForm",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("acceptCharset","action","autocomplete","off","enctype","method","name","novalidate","target")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetFrame",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetFrameset",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetH",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("align")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetHeader",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetHr",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetI",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetIframe",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("name","src","srcdoc","sandbox")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetImg",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("alt","crossorigin","height","hspace","ismap","longdesc","sizes","src","usemap","width")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetSeenImport",["WbWidgetGroup","$wbUtil","$q",function(t,e,i){"use strict";function r(e,i,r){t.apply(this,[e,i,r]),this.setAllowedTypes(),this.addElementAttributes("url");var o=this;function n(t){"url"===t.key&&o.reload()}this.on("modelUpdated",n),this.on("runtimeModelUpdated",n),this.on("modelChanged",function(){o.reload()})}return r.prototype=Object.create(t.prototype),r.prototype.reload=function(){var t=this;t.removeChildren(),t.getModel().children=[];var r,o=this.getProperty("url")||this.getModelProperty("url")||"";return(o=o.trim())?(this.paths=o.split(","),r=function(t){var r=[],o=Array(t.length);function n(){return _.remove(o,function(t){return!_.isUndefined(t)})}return _.forEach(t,function(t,i){var n=t.split("#"),s=n[0],a=n.length>1?n[1]:void 0,l=e.downloadWidgetModel(s,a).then(function(t){o[i]=t});r.push(l)}),i.all(r).then(n,n)}(this.paths).then(function(e){return t.fire("success",{children:e})||e})):r=i.resolve([]),r.then(function(e){return t.addChildrenModel(0,e).finally(function(){t.fire("load",{children:e})})})},r.prototype.setAllowedTypes=function(){this.allowedTypes=[]},r.prototype.setEditable=function(e){t.prototype.setEditable.apply(this,arguments);for(var i=this.getChildren();!_.isEmpty(i);){var r=i.pop();r.setSilent(e),r.isLeaf()||(i=i.concat(r.getChildren()))}},r.prototype.isLeaf=function(){return!0},r}]),angular.module("am-wb-core").factory("WbWidgetInput",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("accept","alt","autocomplete","autofocus","checked","dirname","disabled","form","formaction","formenctype","formmethod","formnovalidate","formtarget","height","list","max","maxlength","min","multiple","name","pattern","placeholder","readonly","required","size","src","step","inputType","value","width");var r=this;function o(t){"inputType"===t.key&&r.setElementAttribute("type",t.value)}this.on("modelUpdated",o),this.on("runtimeModelUpdated",o)}return e.$inject=["$element","$parent"],e.prototype=Object.create(t.prototype),e.prototype.val=function(){var t=arguments[0];t&&this.setElementAttribute("value",t);var e=this.getElement();return e.val.apply(e,arguments)},e}]),angular.module("am-wb-core").factory("WbWidgetKbd",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetLabel",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetLegend",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetLi",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetLink",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("crossorigin","href","hreflang","media","rel","size","type")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetMain",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetMap",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetMeta",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("charset","content","httpEquiv","name")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetMeter",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetNav",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetNoscript",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetObject",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetOl",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetOptgroup",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetOption",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetOutput",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetP",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i])}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetParam",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetPicture",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("alt","crossorigin","height","hspace","ismap","longdesc","sizes","src","usemap","width"),this.setAllowedTypes("source","img")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetPre",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("text");var r=this;function o(t){if("text"===t.key){var e=r.getProperty(t.key)||r.getModelProperty(t.key);r.getElement().text(e)}}this.on("modelUpdated",o),this.on("runtimeModelUpdated",o)}return e.prototype=Object.create(t.prototype),e.prototype.text=function(){var t=arguments[0];t&&this.setElementAttribute("text",t);var e=this.getElement();return e.text.apply(e,arguments)},e}]),angular.module("am-wb-core").factory("WbWidgetProgress",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("value","max")}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetQ",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetS",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetSamp",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetScript",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetSection",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetSelect",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetSmall",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetSource",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("src","srcset","media","sizes","sourceType");var r=this;function o(t){"sourceType"===t.key&&r.setElementAttribute("type",t.value)}this.on("modelUpdated",o),this.on("runtimeModelUpdated",o)}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetSpan",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetStrong",["WbWidgetAbstractHtml",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetStyle",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("text");var r=this;function o(t){if("text"===t.key){var e=r.getProperty(t.key)||r.getModelProperty(t.key);r.getElement().text(e)}}this.on("modelUpdated",o),this.on("runtimeModelUpdated",o)}return e.prototype=Object.create(t.prototype),e.prototype.text=function(){var t=arguments[0];t&&this.setElementAttribute("text",t);var e=this.getElement();return e.text.apply(e,arguments)},e}]),angular.module("am-wb-core").factory("WbWidgetSummary",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetSvg",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetTemplate",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetTextarea",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("autofocus","cols","dirname","disabled","form","maxlength","name","placeholder","readonly","required","rows","wrap","value")}return e.prototype=Object.create(t.prototype),e.prototype.val=function(){var t=arguments[0];t&&this.setElementAttribute("value",t);var e=this.getElement();return e.val.apply(e,arguments)},e}]),angular.module("am-wb-core").factory("WbWidgetTrack",["WbWidgetAbstract",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetUl",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes()}return e.prototype=Object.create(t.prototype),e}]),angular.module("am-wb-core").factory("WbWidgetVideo",["WbWidgetGroup",function(t){function e(e,i){t.apply(this,[e,i]),this.addElementAttributes("autoplay","controls","height","loop","muted","poster","preload","src","usemap","width"),this.setAllowedTypes("source")}return e.prototype=Object.create(t.prototype),e}]);